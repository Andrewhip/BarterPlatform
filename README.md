# Бартерная платформа

Платформа для обмена вещами между пользователями.

## Описание проекта

Проект представляет собой веб-приложение на Django для организации обмена вещами между пользователями. Основные функции:
- Создание, редактирование и удаление объявлений.
- Поиск и фильтрация объявлений по категориям и состоянию.
- Отправка предложений обмена и управление их статусом.
- Архивирование объявлений после завершения обмена.

## Технологический стек

- **Инструменты тестирования:** Python 3.13.0
- **Фреймворк:** Django 5.2 (с использованием встроенной ORM)
- **База данных:** SQLite (по умолчанию)
- **Шаблонизация:** Django Templates
- **Статические файлы:** CSS (в директории `static/css/`)
- **Инструменты тестирования: Unittest (встроенная система тестирования Django)**


## Установка

1. Клонируйте репозиторий:
   git clone https://github.com/Andrewhip/BarterPlatform.git
   cd BarterPlatform

2. Создайте и активируйте виртуальное окружение:
   - Для Windows:
     python -m venv venv
     venv\Scripts\activate
   - Для macOS/Linux:
     python -m venv venv
     source venv/bin/activate

3. Установите зависимости:
   pip install -r requirements.txt

## Миграции базы данных

Выполните миграции для создания таблиц в базе данных:
python manage.py migrate

## Запуск сервера разработки

Запустите локальный сервер разработки:
python manage.py runserver

Теперь приложение доступно по адресу: http://127.0.0.1:8000/

## Запуск тестов

Для запуска тестов выполните команду:
python manage.py test

## Основные функции

### Создание объявления
- Пользователь может создать объявление, указав следующие данные:
  - Заголовок (title)
  - Описание товара (description)
  - URL изображения (image_url) – опционально
  - Категория товара (category)
  - Состояние товара (например, "новый", "б/у")
- Автоматическая генерация уникального идентификатора (id) для объявления.
- Автоматическая фиксация даты публикации (created_at).

### Редактирование объявления
- Автор объявления может редактировать следующие поля:
  - Заголовок (title)
  - Описание товара (description)
  - URL изображения (image_url)
  - Категория товара (category)
  - Состояние товара (condition)
- Обработка ошибок: уведомление, если объявление не найдено или пользователь не является автором.

### Удаление объявления
- Удаление объявления по его уникальному идентификатору.
- Корректная обработка ошибок (например, при отсутствии объявления с указанным id).

### Поиск и фильтрация объявлений
- Поиск по ключевым словам в заголовке и описании.
- Фильтрация по категории и состоянию товара.
- Реализация пагинации для возврата ограниченного числа результатов за один запрос.

### Обмен предложениями
- Создание предложения обмена:
  - Пользователь отправляет предложение обмена, указывая:
    - ID объявления, инициирующего предложение (ad_sender_id)
    - ID объявления получателя (ad_receiver_id)
    - Комментарий (comment)
  - Автоматическая установка статуса предложения: "ожидает".
- Обновление предложения:
  - Возможность изменения статуса предложения (например, "принята" или "отклонена").
- Просмотр предложений:
  - Фильтрация по отправителю, получателю или статусу.


## Тестирование

Проект включает модульные тесты для проверки ключевых функций приложения. Тесты написаны с использованием встроенной системы тестирования Django (`django.test.TestCase`) и покрывают следующие аспекты:

1. **Создание объявления:**
   - Проверка корректности создания объявления с указанными данными (заголовок, описание, изображение, категория, состояние).
   - Автоматическая генерация уникального идентификатора и фиксация даты публикации.

2. **Редактирование объявления:**
   - Проверка прав доступа: только автор объявления может его редактировать.
   - Корректность обновления полей (заголовок, описание, изображение, категория, состояние).

3. **Удаление объявления:**
   - Проверка удаления объявления по уникальному идентификатору.
   - Обработка ошибок при попытке удаления несуществующего объявления.

4. **Поиск и фильтрация объявлений:**
   - Поиск по ключевым словам в заголовке и описании.
   - Фильтрация по категории и состоянию товара.
   - Реализация пагинации для возврата ограниченного числа результатов за один запрос.

5. **Обмен предложениями:**
   - Создание предложения обмена с указанием отправителя, получателя и комментария.
   - Автоматическая установка статуса предложения ("ожидает").
   - Обновление статуса предложения (например, "принята" или "отклонена").
   - Фильтрация предложений по отправителю, получателю или статусу.

6. **Методы модели `Ad`:**
   - Тест метода `get_absolute_url` для генерации URL страницы деталей объявления.

7. **Представления (Views):**
   - Проверка работы представлений для CRUD-операций (создание, чтение, обновление, удаление).
   - Обработка ошибок доступа (например, запрет на редактирование чужих объявлений).



## Структура проекта
```BarterPlatform/
├── ads/ # Приложение для управления объявлениями и обменами
│ ├── migrations/ # Миграции базы данных
│ ├── templates/ # HTML-шаблоны
│ ├── static/ # Статические файлы
│ ├── tests.py # Тесты
│ ├── models.py # Модели
│ ├── views.py # Представления
│ └── urls.py # Маршруты
├── barter_platform/ # Основной модуль Django
│ ├── settings.py # Настройки проекта
│ ├── urls.py # Главные маршруты
│ ├── wsgi.py # WSGI-конфигурация
│ └── asgi.py # ASGI-конфигурация
├── static/ # Статические файлы
├── templates/ # HTML-шаблоны
└── users/ # Приложение для управления пользователями'''
